import{p as G,r as Tn,s as sn,c as Dn,f as L,n as fn,b as Sn,a as pt}from"./index-CvBTqz6Y.js";import{b as nn,a as v,c as Cn,g as mt,f as O,h as ft,i as xt,j as En,e as I,m as Y}from"./index-Dwteuxnt.js";import{a as Wn,d as gt,b as kt}from"./index-D7TIu75F.js";import{s as dn}from"./index-Ch_qCilz.js";import{t as dt}from"./index-C_aolqmU.js";const Fn={name:"attention",tokenize:St,resolveAll:bt};function bt(n,r){let e=-1,t,i,u,a,l,f,h,p;for(;++e<n.length;)if(n[e][0]==="enter"&&n[e][1].type==="attentionSequence"&&n[e][1]._close){for(t=e;t--;)if(n[t][0]==="exit"&&n[t][1].type==="attentionSequence"&&n[t][1]._open&&r.sliceSerialize(n[t][1]).charCodeAt(0)===r.sliceSerialize(n[e][1]).charCodeAt(0)){if((n[t][1]._close||n[e][1]._open)&&(n[e][1].end.offset-n[e][1].start.offset)%3&&!((n[t][1].end.offset-n[t][1].start.offset+n[e][1].end.offset-n[e][1].start.offset)%3))continue;f=n[t][1].end.offset-n[t][1].start.offset>1&&n[e][1].end.offset-n[e][1].start.offset>1?2:1;const m=Object.assign({},n[t][1].end),g=Object.assign({},n[e][1].start);qn(m,-f),qn(g,f),a={type:f>1?"strongSequence":"emphasisSequence",start:m,end:Object.assign({},n[t][1].end)},l={type:f>1?"strongSequence":"emphasisSequence",start:Object.assign({},n[e][1].start),end:g},u={type:f>1?"strongText":"emphasisText",start:Object.assign({},n[t][1].end),end:Object.assign({},n[e][1].start)},i={type:f>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},l.end)},n[t][1].end=Object.assign({},a.start),n[e][1].start=Object.assign({},l.end),h=[],n[t][1].end.offset-n[t][1].start.offset&&(h=G(h,[["enter",n[t][1],r],["exit",n[t][1],r]])),h=G(h,[["enter",i,r],["enter",a,r],["exit",a,r],["enter",u,r]]),h=G(h,Tn(r.parser.constructs.insideSpan.null,n.slice(t+1,e),r)),h=G(h,[["exit",u,r],["enter",l,r],["exit",l,r],["exit",i,r]]),n[e][1].end.offset-n[e][1].start.offset?(p=2,h=G(h,[["enter",n[e][1],r],["exit",n[e][1],r]])):p=0,sn(n,t-1,e-t+3,h),e=t+h.length-p-2;break}}for(e=-1;++e<n.length;)n[e][1].type==="attentionSequence"&&(n[e][1].type="data");return n}function St(n,r){const e=this.parser.constructs.attentionMarkers.null,t=this.previous,i=Dn(t);let u;return a;function a(f){return u=f,n.enter("attentionSequence"),l(f)}function l(f){if(f===u)return n.consume(f),l;const h=n.exit("attentionSequence"),p=Dn(f),m=!p||p===2&&i||e.includes(f),g=!i||i===2&&p||e.includes(t);return h._open=!!(u===42?m:m&&(i||!g)),h._close=!!(u===42?g:g&&(p||!m)),r(f)}}function qn(n,r){n.column+=r,n.offset+=r,n._bufferIndex+=r}const yt={name:"autolink",tokenize:wt};function wt(n,r,e){let t=0;return i;function i(c){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(c),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),u}function u(c){return nn(c)?(n.consume(c),a):h(c)}function a(c){return c===43||c===45||c===46||v(c)?(t=1,l(c)):h(c)}function l(c){return c===58?(n.consume(c),t=0,f):(c===43||c===45||c===46||v(c))&&t++<32?(n.consume(c),l):(t=0,h(c))}function f(c){return c===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(c),n.exit("autolinkMarker"),n.exit("autolink"),r):c===null||c===32||c===60||Cn(c)?e(c):(n.consume(c),f)}function h(c){return c===64?(n.consume(c),p):mt(c)?(n.consume(c),h):e(c)}function p(c){return v(c)?m(c):e(c)}function m(c){return c===46?(n.consume(c),t=0,p):c===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(c),n.exit("autolinkMarker"),n.exit("autolink"),r):g(c)}function g(c){if((c===45||v(c))&&t++<63){const E=c===45?g:m;return n.consume(c),E}return e(c)}}const $n={name:"blockQuote",tokenize:zt,continuation:{tokenize:It},exit:Ct};function zt(n,r,e){const t=this;return i;function i(a){if(a===62){const l=t.containerState;return l.open||(n.enter("blockQuote",{_container:!0}),l.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(a),n.exit("blockQuoteMarker"),u}return e(a)}function u(a){return O(a)?(n.enter("blockQuotePrefixWhitespace"),n.consume(a),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),r):(n.exit("blockQuotePrefix"),r(a))}}function It(n,r,e){const t=this;return i;function i(a){return O(a)?L(n,u,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):u(a)}function u(a){return n.attempt($n,r,e)(a)}}function Ct(n){n.exit("blockQuote")}const Yn={name:"characterEscape",tokenize:Et};function Et(n,r,e){return t;function t(u){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(u),n.exit("escapeMarker"),i}function i(u){return ft(u)?(n.enter("characterEscapeValue"),n.consume(u),n.exit("characterEscapeValue"),n.exit("characterEscape"),r):e(u)}}const Gn={name:"characterReference",tokenize:Ft};function Ft(n,r,e){const t=this;let i=0,u,a;return l;function l(m){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(m),n.exit("characterReferenceMarker"),f}function f(m){return m===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(m),n.exit("characterReferenceMarkerNumeric"),h):(n.enter("characterReferenceValue"),u=31,a=v,p(m))}function h(m){return m===88||m===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(m),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),u=6,a=xt,p):(n.enter("characterReferenceValue"),u=7,a=En,p(m))}function p(m){if(m===59&&i){const g=n.exit("characterReferenceValue");return a===v&&!Wn(t.sliceSerialize(g))?e(m):(n.enter("characterReferenceMarker"),n.consume(m),n.exit("characterReferenceMarker"),n.exit("characterReference"),r)}return a(m)&&i++<u?(n.consume(m),p):e(m)}}const jn={tokenize:Bt,partial:!0},Rn={name:"codeFenced",tokenize:Tt,concrete:!0};function Tt(n,r,e){const t=this,i={tokenize:M,partial:!0};let u=0,a=0,l;return f;function f(k){return h(k)}function h(k){const T=t.events[t.events.length-1];return u=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,l=k,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),p(k)}function p(k){return k===l?(a++,n.consume(k),p):a<3?e(k):(n.exit("codeFencedFenceSequence"),O(k)?L(n,m,"whitespace")(k):m(k))}function m(k){return k===null||I(k)?(n.exit("codeFencedFence"),t.interrupt?r(k):n.check(jn,F,P)(k)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),g(k))}function g(k){return k===null||I(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),m(k)):O(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),L(n,c,"whitespace")(k)):k===96&&k===l?e(k):(n.consume(k),g)}function c(k){return k===null||I(k)?m(k):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),E(k))}function E(k){return k===null||I(k)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),m(k)):k===96&&k===l?e(k):(n.consume(k),E)}function F(k){return n.attempt(i,P,D)(k)}function D(k){return n.enter("lineEnding"),n.consume(k),n.exit("lineEnding"),b}function b(k){return u>0&&O(k)?L(n,q,"linePrefix",u+1)(k):q(k)}function q(k){return k===null||I(k)?n.check(jn,F,P)(k):(n.enter("codeFlowValue"),w(k))}function w(k){return k===null||I(k)?(n.exit("codeFlowValue"),q(k)):(n.consume(k),w)}function P(k){return n.exit("codeFenced"),r(k)}function M(k,T,H){let V=0;return N;function N(C){return k.enter("lineEnding"),k.consume(C),k.exit("lineEnding"),S}function S(C){return k.enter("codeFencedFence"),O(C)?L(k,y,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):y(C)}function y(C){return C===l?(k.enter("codeFencedFenceSequence"),_(C)):H(C)}function _(C){return C===l?(V++,k.consume(C),_):V>=a?(k.exit("codeFencedFenceSequence"),O(C)?L(k,j,"whitespace")(C):j(C)):H(C)}function j(C){return C===null||I(C)?(k.exit("codeFencedFence"),T(C)):H(C)}}}function Bt(n,r,e){const t=this;return i;function i(a){return a===null?e(a):(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),u)}function u(a){return t.parser.lazy[t.now().line]?e(a):r(a)}}const zn={name:"codeIndented",tokenize:At},Ot={tokenize:Lt,partial:!0};function At(n,r,e){const t=this;return i;function i(h){return n.enter("codeIndented"),L(n,u,"linePrefix",5)(h)}function u(h){const p=t.events[t.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?a(h):e(h)}function a(h){return h===null?f(h):I(h)?n.attempt(Ot,a,f)(h):(n.enter("codeFlowValue"),l(h))}function l(h){return h===null||I(h)?(n.exit("codeFlowValue"),a(h)):(n.consume(h),l)}function f(h){return n.exit("codeIndented"),r(h)}}function Lt(n,r,e){const t=this;return i;function i(a){return t.parser.lazy[t.now().line]?e(a):I(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),i):L(n,u,"linePrefix",5)(a)}function u(a){const l=t.events[t.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?r(a):I(a)?i(a):e(a)}}const Pt={name:"codeText",tokenize:Dt,resolve:_t,previous:Mt};function _t(n){let r=n.length-4,e=3,t,i;if((n[e][1].type==="lineEnding"||n[e][1].type==="space")&&(n[r][1].type==="lineEnding"||n[r][1].type==="space")){for(t=e;++t<r;)if(n[t][1].type==="codeTextData"){n[e][1].type="codeTextPadding",n[r][1].type="codeTextPadding",e+=2,r-=2;break}}for(t=e-1,r++;++t<=r;)i===void 0?t!==r&&n[t][1].type!=="lineEnding"&&(i=t):(t===r||n[t][1].type==="lineEnding")&&(n[i][1].type="codeTextData",t!==i+2&&(n[i][1].end=n[t-1][1].end,n.splice(i+2,t-i-2),r-=t-i-2,t=i+2),i=void 0);return n}function Mt(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Dt(n,r,e){let t=0,i,u;return a;function a(m){return n.enter("codeText"),n.enter("codeTextSequence"),l(m)}function l(m){return m===96?(n.consume(m),t++,l):(n.exit("codeTextSequence"),f(m))}function f(m){return m===null?e(m):m===32?(n.enter("space"),n.consume(m),n.exit("space"),f):m===96?(u=n.enter("codeTextSequence"),i=0,p(m)):I(m)?(n.enter("lineEnding"),n.consume(m),n.exit("lineEnding"),f):(n.enter("codeTextData"),h(m))}function h(m){return m===null||m===32||m===96||I(m)?(n.exit("codeTextData"),f(m)):(n.consume(m),h)}function p(m){return m===96?(n.consume(m),i++,p):i===t?(n.exit("codeTextSequence"),n.exit("codeText"),r(m)):(u.type="codeTextData",h(m))}}function Jn(n){const r={};let e=-1,t,i,u,a,l,f,h;for(;++e<n.length;){for(;e in r;)e=r[e];if(t=n[e],e&&t[1].type==="chunkFlow"&&n[e-1][1].type==="listItemPrefix"&&(f=t[1]._tokenizer.events,u=0,u<f.length&&f[u][1].type==="lineEndingBlank"&&(u+=2),u<f.length&&f[u][1].type==="content"))for(;++u<f.length&&f[u][1].type!=="content";)f[u][1].type==="chunkText"&&(f[u][1]._isInFirstContentOfListItem=!0,u++);if(t[0]==="enter")t[1].contentType&&(Object.assign(r,qt(n,e)),e=r[e],h=!0);else if(t[1]._container){for(u=e,i=void 0;u--&&(a=n[u],a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(i&&(n[i][1].type="lineEndingBlank"),a[1].type="lineEnding",i=u);i&&(t[1].end=Object.assign({},n[i][1].start),l=n.slice(i,e),l.unshift(t),sn(n,i,e-i+1,l))}}return!h}function qt(n,r){const e=n[r][1],t=n[r][2];let i=r-1;const u=[],a=e._tokenizer||t.parser[e.contentType](e.start),l=a.events,f=[],h={};let p,m,g=-1,c=e,E=0,F=0;const D=[F];for(;c;){for(;n[++i][1]!==c;);u.push(i),c._tokenizer||(p=t.sliceStream(c),c.next||p.push(null),m&&a.defineSkip(c.start),c._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(p),c._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),m=c,c=c.next}for(c=e;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(F=g+1,D.push(F),c._tokenizer=void 0,c.previous=void 0,c=c.next);for(a.events=[],c?(c._tokenizer=void 0,c.previous=void 0):D.pop(),g=D.length;g--;){const b=l.slice(D[g],D[g+1]),q=u.pop();f.unshift([q,q+b.length-1]),sn(n,q,2,b)}for(g=-1;++g<f.length;)h[E+f[g][0]]=E+f[g][1],E+=f[g][1]-f[g][0]-1;return h}const jt={tokenize:Vt,resolve:Ht},Rt={tokenize:Nt,partial:!0};function Ht(n){return Jn(n),n}function Vt(n,r){let e;return t;function t(l){return n.enter("content"),e=n.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?u(l):I(l)?n.check(Rt,a,u)(l):(n.consume(l),i)}function u(l){return n.exit("chunkContent"),n.exit("content"),r(l)}function a(l){return n.consume(l),n.exit("chunkContent"),e.next=n.enter("chunkContent",{contentType:"content",previous:e}),e=e.next,i}}function Nt(n,r,e){const t=this;return i;function i(a){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),L(n,u,"linePrefix")}function u(a){if(a===null||I(a))return e(a);const l=t.events[t.events.length-1];return!t.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?r(a):n.interrupt(t.parser.constructs.flow,e,r)(a)}}function Kn(n,r,e,t,i,u,a,l,f){const h=f||Number.POSITIVE_INFINITY;let p=0;return m;function m(b){return b===60?(n.enter(t),n.enter(i),n.enter(u),n.consume(b),n.exit(u),g):b===null||b===32||b===41||Cn(b)?e(b):(n.enter(t),n.enter(a),n.enter(l),n.enter("chunkString",{contentType:"string"}),F(b))}function g(b){return b===62?(n.enter(u),n.consume(b),n.exit(u),n.exit(i),n.exit(t),r):(n.enter(l),n.enter("chunkString",{contentType:"string"}),c(b))}function c(b){return b===62?(n.exit("chunkString"),n.exit(l),g(b)):b===null||b===60||I(b)?e(b):(n.consume(b),b===92?E:c)}function E(b){return b===60||b===62||b===92?(n.consume(b),c):c(b)}function F(b){return!p&&(b===null||b===41||Y(b))?(n.exit("chunkString"),n.exit(l),n.exit(a),n.exit(t),r(b)):p<h&&b===40?(n.consume(b),p++,F):b===41?(n.consume(b),p--,F):b===null||b===32||b===40||Cn(b)?e(b):(n.consume(b),b===92?D:F)}function D(b){return b===40||b===41||b===92?(n.consume(b),F):F(b)}}function Xn(n,r,e,t,i,u){const a=this;let l=0,f;return h;function h(c){return n.enter(t),n.enter(i),n.consume(c),n.exit(i),n.enter(u),p}function p(c){return l>999||c===null||c===91||c===93&&!f||c===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?e(c):c===93?(n.exit(u),n.enter(i),n.consume(c),n.exit(i),n.exit(t),r):I(c)?(n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),p):(n.enter("chunkString",{contentType:"string"}),m(c))}function m(c){return c===null||c===91||c===93||I(c)||l++>999?(n.exit("chunkString"),p(c)):(n.consume(c),f||(f=!O(c)),c===92?g:m)}function g(c){return c===91||c===92||c===93?(n.consume(c),l++,m):m(c)}}function Zn(n,r,e,t,i,u){let a;return l;function l(g){return g===34||g===39||g===40?(n.enter(t),n.enter(i),n.consume(g),n.exit(i),a=g===40?41:g,f):e(g)}function f(g){return g===a?(n.enter(i),n.consume(g),n.exit(i),n.exit(t),r):(n.enter(u),h(g))}function h(g){return g===a?(n.exit(u),f(a)):g===null?e(g):I(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),L(n,h,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===a||g===null||I(g)?(n.exit("chunkString"),h(g)):(n.consume(g),g===92?m:p)}function m(g){return g===a||g===92?(n.consume(g),p):p(g)}}function kn(n,r){let e;return t;function t(i){return I(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),e=!0,t):O(i)?L(n,t,e?"linePrefix":"lineSuffix")(i):r(i)}}const Qt={name:"definition",tokenize:Wt},Ut={tokenize:$t,partial:!0};function Wt(n,r,e){const t=this;let i;return u;function u(c){return n.enter("definition"),a(c)}function a(c){return Xn.call(t,n,l,e,"definitionLabel","definitionLabelMarker","definitionLabelString")(c)}function l(c){return i=fn(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)),c===58?(n.enter("definitionMarker"),n.consume(c),n.exit("definitionMarker"),f):e(c)}function f(c){return Y(c)?kn(n,h)(c):h(c)}function h(c){return Kn(n,p,e,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(c)}function p(c){return n.attempt(Ut,m,m)(c)}function m(c){return O(c)?L(n,g,"whitespace")(c):g(c)}function g(c){return c===null||I(c)?(n.exit("definition"),t.parser.defined.push(i),r(c)):e(c)}}function $t(n,r,e){return t;function t(l){return Y(l)?kn(n,i)(l):e(l)}function i(l){return Zn(n,u,e,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function u(l){return O(l)?L(n,a,"whitespace")(l):a(l)}function a(l){return l===null||I(l)?r(l):e(l)}}const Yt={name:"hardBreakEscape",tokenize:Gt};function Gt(n,r,e){return t;function t(u){return n.enter("hardBreakEscape"),n.consume(u),i}function i(u){return I(u)?(n.exit("hardBreakEscape"),r(u)):e(u)}}const Jt={name:"headingAtx",tokenize:Xt,resolve:Kt};function Kt(n,r){let e=n.length-2,t=3,i,u;return n[t][1].type==="whitespace"&&(t+=2),e-2>t&&n[e][1].type==="whitespace"&&(e-=2),n[e][1].type==="atxHeadingSequence"&&(t===e-1||e-4>t&&n[e-2][1].type==="whitespace")&&(e-=t+1===e?2:4),e>t&&(i={type:"atxHeadingText",start:n[t][1].start,end:n[e][1].end},u={type:"chunkText",start:n[t][1].start,end:n[e][1].end,contentType:"text"},sn(n,t,e-t+1,[["enter",i,r],["enter",u,r],["exit",u,r],["exit",i,r]])),n}function Xt(n,r,e){let t=0;return i;function i(p){return n.enter("atxHeading"),u(p)}function u(p){return n.enter("atxHeadingSequence"),a(p)}function a(p){return p===35&&t++<6?(n.consume(p),a):p===null||Y(p)?(n.exit("atxHeadingSequence"),l(p)):e(p)}function l(p){return p===35?(n.enter("atxHeadingSequence"),f(p)):p===null||I(p)?(n.exit("atxHeading"),r(p)):O(p)?L(n,l,"whitespace")(p):(n.enter("atxHeadingText"),h(p))}function f(p){return p===35?(n.consume(p),f):(n.exit("atxHeadingSequence"),l(p))}function h(p){return p===null||p===35||Y(p)?(n.exit("atxHeadingText"),l(p)):(n.consume(p),h)}}const Zt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Hn=["pre","script","style","textarea"],vt={name:"htmlFlow",tokenize:re,resolveTo:ee,concrete:!0},ne={tokenize:ue,partial:!0},te={tokenize:ie,partial:!0};function ee(n){let r=n.length;for(;r--&&!(n[r][0]==="enter"&&n[r][1].type==="htmlFlow"););return r>1&&n[r-2][1].type==="linePrefix"&&(n[r][1].start=n[r-2][1].start,n[r+1][1].start=n[r-2][1].start,n.splice(r-2,2)),n}function re(n,r,e){const t=this;let i,u,a,l,f;return h;function h(s){return p(s)}function p(s){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(s),m}function m(s){return s===33?(n.consume(s),g):s===47?(n.consume(s),u=!0,F):s===63?(n.consume(s),i=3,t.interrupt?r:o):nn(s)?(n.consume(s),a=String.fromCharCode(s),D):e(s)}function g(s){return s===45?(n.consume(s),i=2,c):s===91?(n.consume(s),i=5,l=0,E):nn(s)?(n.consume(s),i=4,t.interrupt?r:o):e(s)}function c(s){return s===45?(n.consume(s),t.interrupt?r:o):e(s)}function E(s){const X="CDATA[";return s===X.charCodeAt(l++)?(n.consume(s),l===X.length?t.interrupt?r:y:E):e(s)}function F(s){return nn(s)?(n.consume(s),a=String.fromCharCode(s),D):e(s)}function D(s){if(s===null||s===47||s===62||Y(s)){const X=s===47,cn=a.toLowerCase();return!X&&!u&&Hn.includes(cn)?(i=1,t.interrupt?r(s):y(s)):Zt.includes(a.toLowerCase())?(i=6,X?(n.consume(s),b):t.interrupt?r(s):y(s)):(i=7,t.interrupt&&!t.parser.lazy[t.now().line]?e(s):u?q(s):w(s))}return s===45||v(s)?(n.consume(s),a+=String.fromCharCode(s),D):e(s)}function b(s){return s===62?(n.consume(s),t.interrupt?r:y):e(s)}function q(s){return O(s)?(n.consume(s),q):N(s)}function w(s){return s===47?(n.consume(s),N):s===58||s===95||nn(s)?(n.consume(s),P):O(s)?(n.consume(s),w):N(s)}function P(s){return s===45||s===46||s===58||s===95||v(s)?(n.consume(s),P):M(s)}function M(s){return s===61?(n.consume(s),k):O(s)?(n.consume(s),M):w(s)}function k(s){return s===null||s===60||s===61||s===62||s===96?e(s):s===34||s===39?(n.consume(s),f=s,T):O(s)?(n.consume(s),k):H(s)}function T(s){return s===f?(n.consume(s),f=null,V):s===null||I(s)?e(s):(n.consume(s),T)}function H(s){return s===null||s===34||s===39||s===47||s===60||s===61||s===62||s===96||Y(s)?M(s):(n.consume(s),H)}function V(s){return s===47||s===62||O(s)?w(s):e(s)}function N(s){return s===62?(n.consume(s),S):e(s)}function S(s){return s===null||I(s)?y(s):O(s)?(n.consume(s),S):e(s)}function y(s){return s===45&&i===2?(n.consume(s),W):s===60&&i===1?(n.consume(s),Q):s===62&&i===4?(n.consume(s),K):s===63&&i===3?(n.consume(s),o):s===93&&i===5?(n.consume(s),tn):I(s)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(ne,en,_)(s)):s===null||I(s)?(n.exit("htmlFlowData"),_(s)):(n.consume(s),y)}function _(s){return n.check(te,j,en)(s)}function j(s){return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),C}function C(s){return s===null||I(s)?_(s):(n.enter("htmlFlowData"),y(s))}function W(s){return s===45?(n.consume(s),o):y(s)}function Q(s){return s===47?(n.consume(s),a="",J):y(s)}function J(s){if(s===62){const X=a.toLowerCase();return Hn.includes(X)?(n.consume(s),K):y(s)}return nn(s)&&a.length<8?(n.consume(s),a+=String.fromCharCode(s),J):y(s)}function tn(s){return s===93?(n.consume(s),o):y(s)}function o(s){return s===62?(n.consume(s),K):s===45&&i===2?(n.consume(s),o):y(s)}function K(s){return s===null||I(s)?(n.exit("htmlFlowData"),en(s)):(n.consume(s),K)}function en(s){return n.exit("htmlFlow"),r(s)}}function ie(n,r,e){const t=this;return i;function i(a){return I(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),u):e(a)}function u(a){return t.parser.lazy[t.now().line]?e(a):r(a)}}function ue(n,r,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(Sn,r,e)}}const ae={name:"htmlText",tokenize:le};function le(n,r,e){const t=this;let i,u,a;return l;function l(o){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(o),f}function f(o){return o===33?(n.consume(o),h):o===47?(n.consume(o),M):o===63?(n.consume(o),w):nn(o)?(n.consume(o),H):e(o)}function h(o){return o===45?(n.consume(o),p):o===91?(n.consume(o),u=0,E):nn(o)?(n.consume(o),q):e(o)}function p(o){return o===45?(n.consume(o),c):e(o)}function m(o){return o===null?e(o):o===45?(n.consume(o),g):I(o)?(a=m,Q(o)):(n.consume(o),m)}function g(o){return o===45?(n.consume(o),c):m(o)}function c(o){return o===62?W(o):o===45?g(o):m(o)}function E(o){const K="CDATA[";return o===K.charCodeAt(u++)?(n.consume(o),u===K.length?F:E):e(o)}function F(o){return o===null?e(o):o===93?(n.consume(o),D):I(o)?(a=F,Q(o)):(n.consume(o),F)}function D(o){return o===93?(n.consume(o),b):F(o)}function b(o){return o===62?W(o):o===93?(n.consume(o),b):F(o)}function q(o){return o===null||o===62?W(o):I(o)?(a=q,Q(o)):(n.consume(o),q)}function w(o){return o===null?e(o):o===63?(n.consume(o),P):I(o)?(a=w,Q(o)):(n.consume(o),w)}function P(o){return o===62?W(o):w(o)}function M(o){return nn(o)?(n.consume(o),k):e(o)}function k(o){return o===45||v(o)?(n.consume(o),k):T(o)}function T(o){return I(o)?(a=T,Q(o)):O(o)?(n.consume(o),T):W(o)}function H(o){return o===45||v(o)?(n.consume(o),H):o===47||o===62||Y(o)?V(o):e(o)}function V(o){return o===47?(n.consume(o),W):o===58||o===95||nn(o)?(n.consume(o),N):I(o)?(a=V,Q(o)):O(o)?(n.consume(o),V):W(o)}function N(o){return o===45||o===46||o===58||o===95||v(o)?(n.consume(o),N):S(o)}function S(o){return o===61?(n.consume(o),y):I(o)?(a=S,Q(o)):O(o)?(n.consume(o),S):V(o)}function y(o){return o===null||o===60||o===61||o===62||o===96?e(o):o===34||o===39?(n.consume(o),i=o,_):I(o)?(a=y,Q(o)):O(o)?(n.consume(o),y):(n.consume(o),j)}function _(o){return o===i?(n.consume(o),i=void 0,C):o===null?e(o):I(o)?(a=_,Q(o)):(n.consume(o),_)}function j(o){return o===null||o===34||o===39||o===60||o===61||o===96?e(o):o===47||o===62||Y(o)?V(o):(n.consume(o),j)}function C(o){return o===47||o===62||Y(o)?V(o):e(o)}function W(o){return o===62?(n.consume(o),n.exit("htmlTextData"),n.exit("htmlText"),r):e(o)}function Q(o){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),J}function J(o){return O(o)?L(n,tn,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):tn(o)}function tn(o){return n.enter("htmlTextData"),a(o)}}const Bn={name:"labelEnd",tokenize:me,resolveTo:pe,resolveAll:he},oe={tokenize:fe},se={tokenize:xe},ce={tokenize:ge};function he(n){let r=-1;for(;++r<n.length;){const e=n[r][1];(e.type==="labelImage"||e.type==="labelLink"||e.type==="labelEnd")&&(n.splice(r+1,e.type==="labelImage"?4:2),e.type="data",r++)}return n}function pe(n,r){let e=n.length,t=0,i,u,a,l;for(;e--;)if(i=n[e][1],u){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[e][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(n[e][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(u=e,i.type!=="labelLink")){t=2;break}}else i.type==="labelEnd"&&(a=e);const f={type:n[u][1].type==="labelLink"?"link":"image",start:Object.assign({},n[u][1].start),end:Object.assign({},n[n.length-1][1].end)},h={type:"label",start:Object.assign({},n[u][1].start),end:Object.assign({},n[a][1].end)},p={type:"labelText",start:Object.assign({},n[u+t+2][1].end),end:Object.assign({},n[a-2][1].start)};return l=[["enter",f,r],["enter",h,r]],l=G(l,n.slice(u+1,u+t+3)),l=G(l,[["enter",p,r]]),l=G(l,Tn(r.parser.constructs.insideSpan.null,n.slice(u+t+4,a-3),r)),l=G(l,[["exit",p,r],n[a-2],n[a-1],["exit",h,r]]),l=G(l,n.slice(a+1)),l=G(l,[["exit",f,r]]),sn(n,u,n.length,l),n}function me(n,r,e){const t=this;let i=t.events.length,u,a;for(;i--;)if((t.events[i][1].type==="labelImage"||t.events[i][1].type==="labelLink")&&!t.events[i][1]._balanced){u=t.events[i][1];break}return l;function l(g){return u?u._inactive?m(g):(a=t.parser.defined.includes(fn(t.sliceSerialize({start:u.end,end:t.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(g),n.exit("labelMarker"),n.exit("labelEnd"),f):e(g)}function f(g){return g===40?n.attempt(oe,p,a?p:m)(g):g===91?n.attempt(se,p,a?h:m)(g):a?p(g):m(g)}function h(g){return n.attempt(ce,p,m)(g)}function p(g){return r(g)}function m(g){return u._balanced=!0,e(g)}}function fe(n,r,e){return t;function t(m){return n.enter("resource"),n.enter("resourceMarker"),n.consume(m),n.exit("resourceMarker"),i}function i(m){return Y(m)?kn(n,u)(m):u(m)}function u(m){return m===41?p(m):Kn(n,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function a(m){return Y(m)?kn(n,f)(m):p(m)}function l(m){return e(m)}function f(m){return m===34||m===39||m===40?Zn(n,h,e,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):p(m)}function h(m){return Y(m)?kn(n,p)(m):p(m)}function p(m){return m===41?(n.enter("resourceMarker"),n.consume(m),n.exit("resourceMarker"),n.exit("resource"),r):e(m)}}function xe(n,r,e){const t=this;return i;function i(l){return Xn.call(t,n,u,a,"reference","referenceMarker","referenceString")(l)}function u(l){return t.parser.defined.includes(fn(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)))?r(l):e(l)}function a(l){return e(l)}}function ge(n,r,e){return t;function t(u){return n.enter("reference"),n.enter("referenceMarker"),n.consume(u),n.exit("referenceMarker"),i}function i(u){return u===93?(n.enter("referenceMarker"),n.consume(u),n.exit("referenceMarker"),n.exit("reference"),r):e(u)}}const ke={name:"labelStartImage",tokenize:de,resolveAll:Bn.resolveAll};function de(n,r,e){const t=this;return i;function i(l){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(l),n.exit("labelImageMarker"),u}function u(l){return l===91?(n.enter("labelMarker"),n.consume(l),n.exit("labelMarker"),n.exit("labelImage"),a):e(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in t.parser.constructs?e(l):r(l)}}const be={name:"labelStartLink",tokenize:Se,resolveAll:Bn.resolveAll};function Se(n,r,e){const t=this;return i;function i(a){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelLink"),u}function u(a){return a===94&&"_hiddenFootnoteSupport"in t.parser.constructs?e(a):r(a)}}const In={name:"lineEnding",tokenize:ye};function ye(n,r){return e;function e(t){return n.enter("lineEnding"),n.consume(t),n.exit("lineEnding"),L(n,r,"linePrefix")}}const bn={name:"thematicBreak",tokenize:we};function we(n,r,e){let t=0,i;return u;function u(h){return n.enter("thematicBreak"),a(h)}function a(h){return i=h,l(h)}function l(h){return h===i?(n.enter("thematicBreakSequence"),f(h)):t>=3&&(h===null||I(h))?(n.exit("thematicBreak"),r(h)):e(h)}function f(h){return h===i?(n.consume(h),t++,f):(n.exit("thematicBreakSequence"),O(h)?L(n,l,"whitespace")(h):l(h))}}const $={name:"list",tokenize:Ce,continuation:{tokenize:Ee},exit:Te},ze={tokenize:Be,partial:!0},Ie={tokenize:Fe,partial:!0};function Ce(n,r,e){const t=this,i=t.events[t.events.length-1];let u=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return l;function l(c){const E=t.containerState.type||(c===42||c===43||c===45?"listUnordered":"listOrdered");if(E==="listUnordered"?!t.containerState.marker||c===t.containerState.marker:En(c)){if(t.containerState.type||(t.containerState.type=E,n.enter(E,{_container:!0})),E==="listUnordered")return n.enter("listItemPrefix"),c===42||c===45?n.check(bn,e,h)(c):h(c);if(!t.interrupt||c===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),f(c)}return e(c)}function f(c){return En(c)&&++a<10?(n.consume(c),f):(!t.interrupt||a<2)&&(t.containerState.marker?c===t.containerState.marker:c===41||c===46)?(n.exit("listItemValue"),h(c)):e(c)}function h(c){return n.enter("listItemMarker"),n.consume(c),n.exit("listItemMarker"),t.containerState.marker=t.containerState.marker||c,n.check(Sn,t.interrupt?e:p,n.attempt(ze,g,m))}function p(c){return t.containerState.initialBlankLine=!0,u++,g(c)}function m(c){return O(c)?(n.enter("listItemPrefixWhitespace"),n.consume(c),n.exit("listItemPrefixWhitespace"),g):e(c)}function g(c){return t.containerState.size=u+t.sliceSerialize(n.exit("listItemPrefix"),!0).length,r(c)}}function Ee(n,r,e){const t=this;return t.containerState._closeFlow=void 0,n.check(Sn,i,u);function i(l){return t.containerState.furtherBlankLines=t.containerState.furtherBlankLines||t.containerState.initialBlankLine,L(n,r,"listItemIndent",t.containerState.size+1)(l)}function u(l){return t.containerState.furtherBlankLines||!O(l)?(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,a(l)):(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,n.attempt(Ie,r,a)(l))}function a(l){return t.containerState._closeFlow=!0,t.interrupt=void 0,L(n,n.attempt($,r,e),"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Fe(n,r,e){const t=this;return L(n,i,"listItemIndent",t.containerState.size+1);function i(u){const a=t.events[t.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===t.containerState.size?r(u):e(u)}}function Te(n){n.exit(this.containerState.type)}function Be(n,r,e){const t=this;return L(n,i,"listItemPrefixWhitespace",t.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(u){const a=t.events[t.events.length-1];return!O(u)&&a&&a[1].type==="listItemPrefixWhitespace"?r(u):e(u)}}const Vn={name:"setextUnderline",tokenize:Ae,resolveTo:Oe};function Oe(n,r){let e=n.length,t,i,u;for(;e--;)if(n[e][0]==="enter"){if(n[e][1].type==="content"){t=e;break}n[e][1].type==="paragraph"&&(i=e)}else n[e][1].type==="content"&&n.splice(e,1),!u&&n[e][1].type==="definition"&&(u=e);const a={type:"setextHeading",start:Object.assign({},n[i][1].start),end:Object.assign({},n[n.length-1][1].end)};return n[i][1].type="setextHeadingText",u?(n.splice(i,0,["enter",a,r]),n.splice(u+1,0,["exit",n[t][1],r]),n[t][1].end=Object.assign({},n[u][1].end)):n[t][1]=a,n.push(["exit",a,r]),n}function Ae(n,r,e){const t=this;let i;return u;function u(h){let p=t.events.length,m;for(;p--;)if(t.events[p][1].type!=="lineEnding"&&t.events[p][1].type!=="linePrefix"&&t.events[p][1].type!=="content"){m=t.events[p][1].type==="paragraph";break}return!t.parser.lazy[t.now().line]&&(t.interrupt||m)?(n.enter("setextHeadingLine"),i=h,a(h)):e(h)}function a(h){return n.enter("setextHeadingLineSequence"),l(h)}function l(h){return h===i?(n.consume(h),l):(n.exit("setextHeadingLineSequence"),O(h)?L(n,f,"lineSuffix")(h):f(h))}function f(h){return h===null||I(h)?(n.exit("setextHeadingLine"),r(h)):e(h)}}const Le={tokenize:Pe};function Pe(n){const r=n.attempt(this.parser.constructs.contentInitial,t,i);let e;return r;function t(l){if(l===null){n.consume(l);return}return n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),L(n,r,"linePrefix")}function i(l){return n.enter("paragraph"),u(l)}function u(l){const f=n.enter("chunkText",{contentType:"text",previous:e});return e&&(e.next=f),e=f,a(l)}function a(l){if(l===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(l);return}return I(l)?(n.consume(l),n.exit("chunkText"),u):(n.consume(l),a)}}const _e={tokenize:Me},Nn={tokenize:De};function Me(n){const r=this,e=[];let t=0,i,u,a;return l;function l(w){if(t<e.length){const P=e[t];return r.containerState=P[1],n.attempt(P[0].continuation,f,h)(w)}return h(w)}function f(w){if(t++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,i&&q();const P=r.events.length;let M=P,k;for(;M--;)if(r.events[M][0]==="exit"&&r.events[M][1].type==="chunkFlow"){k=r.events[M][1].end;break}b(t);let T=P;for(;T<r.events.length;)r.events[T][1].end=Object.assign({},k),T++;return sn(r.events,M+1,0,r.events.slice(P)),r.events.length=T,h(w)}return l(w)}function h(w){if(t===e.length){if(!i)return g(w);if(i.currentConstruct&&i.currentConstruct.concrete)return E(w);r.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return r.containerState={},n.check(Nn,p,m)(w)}function p(w){return i&&q(),b(t),g(w)}function m(w){return r.parser.lazy[r.now().line]=t!==e.length,a=r.now().offset,E(w)}function g(w){return r.containerState={},n.attempt(Nn,c,E)(w)}function c(w){return t++,e.push([r.currentConstruct,r.containerState]),g(w)}function E(w){if(w===null){i&&q(),b(0),n.consume(w);return}return i=i||r.parser.flow(r.now()),n.enter("chunkFlow",{contentType:"flow",previous:u,_tokenizer:i}),F(w)}function F(w){if(w===null){D(n.exit("chunkFlow"),!0),b(0),n.consume(w);return}return I(w)?(n.consume(w),D(n.exit("chunkFlow")),t=0,r.interrupt=void 0,l):(n.consume(w),F)}function D(w,P){const M=r.sliceStream(w);if(P&&M.push(null),w.previous=u,u&&(u.next=w),u=w,i.defineSkip(w.start),i.write(M),r.parser.lazy[w.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<a&&(!i.events[k][1].end||i.events[k][1].end.offset>a))return;const T=r.events.length;let H=T,V,N;for(;H--;)if(r.events[H][0]==="exit"&&r.events[H][1].type==="chunkFlow"){if(V){N=r.events[H][1].end;break}V=!0}for(b(t),k=T;k<r.events.length;)r.events[k][1].end=Object.assign({},N),k++;sn(r.events,H+1,0,r.events.slice(T)),r.events.length=k}}function b(w){let P=e.length;for(;P-- >w;){const M=e[P];r.containerState=M[1],M[0].exit.call(r,n)}e.length=w}function q(){i.write([null]),u=void 0,i=void 0,r.containerState._closeFlow=void 0}}function De(n,r,e){return L(n,n.attempt(this.parser.constructs.document,r,e),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const qe={tokenize:je};function je(n){const r=this,e=n.attempt(Sn,t,n.attempt(this.parser.constructs.flowInitial,i,L(n,n.attempt(this.parser.constructs.flow,i,n.attempt(jt,i)),"linePrefix")));return e;function t(u){if(u===null){n.consume(u);return}return n.enter("lineEndingBlank"),n.consume(u),n.exit("lineEndingBlank"),r.currentConstruct=void 0,e}function i(u){if(u===null){n.consume(u);return}return n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),r.currentConstruct=void 0,e}}const Re={resolveAll:nt()},He=vn("string"),Ve=vn("text");function vn(n){return{tokenize:r,resolveAll:nt(n==="text"?Ne:void 0)};function r(e){const t=this,i=this.parser.constructs[n],u=e.attempt(i,a,l);return a;function a(p){return h(p)?u(p):l(p)}function l(p){if(p===null){e.consume(p);return}return e.enter("data"),e.consume(p),f}function f(p){return h(p)?(e.exit("data"),u(p)):(e.consume(p),f)}function h(p){if(p===null)return!0;const m=i[p];let g=-1;if(m)for(;++g<m.length;){const c=m[g];if(!c.previous||c.previous.call(t,t.previous))return!0}return!1}}}function nt(n){return r;function r(e,t){let i=-1,u;for(;++i<=e.length;)u===void 0?e[i]&&e[i][1].type==="data"&&(u=i,i++):(!e[i]||e[i][1].type!=="data")&&(i!==u+2&&(e[u][1].end=e[i-1][1].end,e.splice(u+2,i-u-2),i=u+2),u=void 0);return n?n(e,t):e}}function Ne(n,r){let e=0;for(;++e<=n.length;)if((e===n.length||n[e][1].type==="lineEnding")&&n[e-1][1].type==="data"){const t=n[e-1][1],i=r.sliceStream(t);let u=i.length,a=-1,l=0,f;for(;u--;){const h=i[u];if(typeof h=="string"){for(a=h.length;h.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(h===-2)f=!0,l++;else if(h!==-1){u++;break}}if(l){const h={type:e===n.length||f||l<2?"lineSuffix":"hardBreakTrailing",start:{line:t.end.line,column:t.end.column-l,offset:t.end.offset-l,_index:t.start._index+u,_bufferIndex:u?a:t.start._bufferIndex+a},end:Object.assign({},t.end)};t.end=Object.assign({},h.start),t.start.offset===t.end.offset?Object.assign(t,h):(n.splice(e,0,["enter",h,r],["exit",h,r]),e+=2)}e++}return n}function Qe(n,r,e){let t=Object.assign(e?Object.assign({},e):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},u=[];let a=[],l=[];const f={consume:q,enter:w,exit:P,attempt:T(M),check:T(k),interrupt:T(k,{interrupt:!0})},h={previous:null,code:null,containerState:{},events:[],parser:n,sliceStream:c,sliceSerialize:g,now:E,defineSkip:F,write:m};let p=r.tokenize.call(h,f);return r.resolveAll&&u.push(r),h;function m(S){return a=G(a,S),D(),a[a.length-1]!==null?[]:(H(r,0),h.events=Tn(u,h.events,h),h.events)}function g(S,y){return We(c(S),y)}function c(S){return Ue(a,S)}function E(){const{line:S,column:y,offset:_,_index:j,_bufferIndex:C}=t;return{line:S,column:y,offset:_,_index:j,_bufferIndex:C}}function F(S){i[S.line]=S.column,N()}function D(){let S;for(;t._index<a.length;){const y=a[t._index];if(typeof y=="string")for(S=t._index,t._bufferIndex<0&&(t._bufferIndex=0);t._index===S&&t._bufferIndex<y.length;)b(y.charCodeAt(t._bufferIndex));else b(y)}}function b(S){p=p(S)}function q(S){I(S)?(t.line++,t.column=1,t.offset+=S===-3?2:1,N()):S!==-1&&(t.column++,t.offset++),t._bufferIndex<0?t._index++:(t._bufferIndex++,t._bufferIndex===a[t._index].length&&(t._bufferIndex=-1,t._index++)),h.previous=S}function w(S,y){const _=y||{};return _.type=S,_.start=E(),h.events.push(["enter",_,h]),l.push(_),_}function P(S){const y=l.pop();return y.end=E(),h.events.push(["exit",y,h]),y}function M(S,y){H(S,y.from)}function k(S,y){y.restore()}function T(S,y){return _;function _(j,C,W){let Q,J,tn,o;return Array.isArray(j)?en(j):"tokenize"in j?en([j]):K(j);function K(U){return hn;function hn(an){const pn=an!==null&&U[an],mn=an!==null&&U.null,yn=[...Array.isArray(pn)?pn:pn?[pn]:[],...Array.isArray(mn)?mn:mn?[mn]:[]];return en(yn)(an)}}function en(U){return Q=U,J=0,U.length===0?W:s(U[J])}function s(U){return hn;function hn(an){return o=V(),tn=U,U.partial||(h.currentConstruct=U),U.name&&h.parser.constructs.disable.null.includes(U.name)?cn():U.tokenize.call(y?Object.assign(Object.create(h),y):h,f,X,cn)(an)}}function X(U){return S(tn,o),C}function cn(U){return o.restore(),++J<Q.length?s(Q[J]):W}}}function H(S,y){S.resolveAll&&!u.includes(S)&&u.push(S),S.resolve&&sn(h.events,y,h.events.length-y,S.resolve(h.events.slice(y),h)),S.resolveTo&&(h.events=S.resolveTo(h.events,h))}function V(){const S=E(),y=h.previous,_=h.currentConstruct,j=h.events.length,C=Array.from(l);return{restore:W,from:j};function W(){t=S,h.previous=y,h.currentConstruct=_,h.events.length=j,l=C,N()}}function N(){t.line in i&&t.column<2&&(t.column=i[t.line],t.offset+=i[t.line]-1)}}function Ue(n,r){const e=r.start._index,t=r.start._bufferIndex,i=r.end._index,u=r.end._bufferIndex;let a;if(e===i)a=[n[e].slice(t,u)];else{if(a=n.slice(e,i),t>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(t):a.shift()}u>0&&a.push(n[i].slice(0,u))}return a}function We(n,r){let e=-1;const t=[];let i;for(;++e<n.length;){const u=n[e];let a;if(typeof u=="string")a=u;else switch(u){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=r?" ":"	";break}case-1:{if(!r&&i)continue;a=" ";break}default:a=String.fromCharCode(u)}i=u===-2,t.push(a)}return t.join("")}const $e={42:$,43:$,45:$,48:$,49:$,50:$,51:$,52:$,53:$,54:$,55:$,56:$,57:$,62:$n},Ye={91:Qt},Ge={[-2]:zn,[-1]:zn,32:zn},Je={35:Jt,42:bn,45:[Vn,bn],60:vt,61:Vn,95:bn,96:Rn,126:Rn},Ke={38:Gn,92:Yn},Xe={[-5]:In,[-4]:In,[-3]:In,33:ke,38:Gn,42:Fn,60:[yt,ae],91:be,92:[Yt,Yn],93:Bn,95:Fn,96:Pt},Ze={null:[Fn,Re]},ve={null:[42,95]},nr={null:[]},tr=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ve,contentInitial:Ye,disable:nr,document:$e,flow:Je,flowInitial:Ge,insideSpan:Ze,string:Ke,text:Xe},Symbol.toStringTag,{value:"Module"}));function er(n){const e=pt([tr,...(n||{}).extensions||[]]),t={defined:[],lazy:{},constructs:e,content:i(Le),document:i(_e),flow:i(qe),string:i(He),text:i(Ve)};return t;function i(u){return a;function a(l){return Qe(t,u,l)}}}const Qn=/[\0\t\n\r]/g;function rr(){let n=1,r="",e=!0,t;return i;function i(u,a,l){const f=[];let h,p,m,g,c;for(u=r+u.toString(a),m=0,r="",e&&(u.charCodeAt(0)===65279&&m++,e=void 0);m<u.length;){if(Qn.lastIndex=m,h=Qn.exec(u),g=h&&h.index!==void 0?h.index:u.length,c=u.charCodeAt(g),!h){r=u.slice(m);break}if(c===10&&m===g&&t)f.push(-3),t=void 0;else switch(t&&(f.push(-5),t=void 0),m<g&&(f.push(u.slice(m,g)),n+=g-m),c){case 0:{f.push(65533),n++;break}case 9:{for(p=Math.ceil(n/4)*4,f.push(-2);n++<p;)f.push(-1);break}case 10:{f.push(-4),n=1;break}default:t=!0,n=1}m=g+1}return l&&(t&&f.push(-5),r&&f.push(r),f.push(null)),f}}function ir(n){for(;!Jn(n););return n}const tt={}.hasOwnProperty,ur=function(n,r,e){return typeof r!="string"&&(e=r,r=void 0),ar(e)(ir(er(e).document().write(rr()(n,r,!0))))};function ar(n){const r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(_n),autolinkProtocol:S,autolinkEmail:S,atxHeading:l(An),blockQuote:l(yn),characterEscape:S,characterReference:S,codeFenced:l(On),codeFencedFenceInfo:f,codeFencedFenceMeta:f,codeIndented:l(On,f),codeText:l(rt,f),codeTextData:S,data:S,codeFlowValue:S,definition:l(it),definitionDestinationString:f,definitionLabelString:f,definitionTitleString:f,emphasis:l(ut),hardBreakEscape:l(Ln),hardBreakTrailing:l(Ln),htmlFlow:l(Pn,f),htmlFlowData:S,htmlText:l(Pn,f),htmlTextData:S,image:l(at),label:f,link:l(_n),listItem:l(lt),listItemValue:E,listOrdered:l(Mn,c),listUnordered:l(Mn),paragraph:l(ot),reference:cn,referenceString:f,resourceDestinationString:f,resourceTitleString:f,setextHeading:l(An),strong:l(st),thematicBreak:l(ht)},exit:{atxHeading:p(),atxHeadingSequence:T,autolink:p(),autolinkEmail:mn,autolinkProtocol:pn,blockQuote:p(),characterEscapeValue:y,characterReferenceMarkerHexadecimal:hn,characterReferenceMarkerNumeric:hn,characterReferenceValue:an,codeFenced:p(q),codeFencedFence:b,codeFencedFenceInfo:F,codeFencedFenceMeta:D,codeFlowValue:y,codeIndented:p(w),codeText:p(Q),codeTextData:y,data:y,definition:p(),definitionDestinationString:k,definitionLabelString:P,definitionTitleString:M,emphasis:p(),hardBreakEscape:p(j),hardBreakTrailing:p(j),htmlFlow:p(C),htmlFlowData:y,htmlText:p(W),htmlTextData:y,image:p(tn),label:K,labelText:o,lineEnding:_,link:p(J),listItem:p(),listOrdered:p(),listUnordered:p(),paragraph:p(),referenceString:U,resourceDestinationString:en,resourceTitleString:s,resource:X,setextHeading:p(N),setextHeadingLineSequence:V,setextHeadingText:H,strong:p(),thematicBreak:p()}};et(r,(n||{}).mdastExtensions||[]);const e={};return t;function t(x){let d={type:"root",children:[]};const z={stack:[d],tokenStack:[],config:r,enter:h,exit:m,buffer:f,resume:g,setData:u,getData:a},B=[];let A=-1;for(;++A<x.length;)if(x[A][1].type==="listOrdered"||x[A][1].type==="listUnordered")if(x[A][0]==="enter")B.push(A);else{const Z=B.pop();A=i(x,Z,A)}for(A=-1;++A<x.length;){const Z=r[x[A][0]];tt.call(Z,x[A][1].type)&&Z[x[A][1].type].call(Object.assign({sliceSerialize:x[A][2].sliceSerialize},z),x[A][1])}if(z.tokenStack.length>0){const Z=z.tokenStack[z.tokenStack.length-1];(Z[1]||Un).call(z,void 0,Z[0])}for(d.position={start:on(x.length>0?x[0][1].start:{line:1,column:1,offset:0}),end:on(x.length>0?x[x.length-2][1].end:{line:1,column:1,offset:0})},A=-1;++A<r.transforms.length;)d=r.transforms[A](d)||d;return d}function i(x,d,z){let B=d-1,A=-1,Z=!1,ln,rn,xn,gn;for(;++B<=z;){const R=x[B];if(R[1].type==="listUnordered"||R[1].type==="listOrdered"||R[1].type==="blockQuote"?(R[0]==="enter"?A++:A--,gn=void 0):R[1].type==="lineEndingBlank"?R[0]==="enter"&&(ln&&!gn&&!A&&!xn&&(xn=B),gn=void 0):R[1].type==="linePrefix"||R[1].type==="listItemValue"||R[1].type==="listItemMarker"||R[1].type==="listItemPrefix"||R[1].type==="listItemPrefixWhitespace"||(gn=void 0),!A&&R[0]==="enter"&&R[1].type==="listItemPrefix"||A===-1&&R[0]==="exit"&&(R[1].type==="listUnordered"||R[1].type==="listOrdered")){if(ln){let wn=B;for(rn=void 0;wn--;){const un=x[wn];if(un[1].type==="lineEnding"||un[1].type==="lineEndingBlank"){if(un[0]==="exit")continue;rn&&(x[rn][1].type="lineEndingBlank",Z=!0),un[1].type="lineEnding",rn=wn}else if(!(un[1].type==="linePrefix"||un[1].type==="blockQuotePrefix"||un[1].type==="blockQuotePrefixWhitespace"||un[1].type==="blockQuoteMarker"||un[1].type==="listItemIndent"))break}xn&&(!rn||xn<rn)&&(ln._spread=!0),ln.end=Object.assign({},rn?x[rn][1].start:R[1].end),x.splice(rn||B,0,["exit",ln,R[2]]),B++,z++}R[1].type==="listItemPrefix"&&(ln={type:"listItem",_spread:!1,start:Object.assign({},R[1].start),end:void 0},x.splice(B,0,["enter",ln,R[2]]),B++,z++,xn=void 0,gn=!0)}}return x[d][1]._spread=Z,z}function u(x,d){e[x]=d}function a(x){return e[x]}function l(x,d){return z;function z(B){h.call(this,x(B),B),d&&d.call(this,B)}}function f(){this.stack.push({type:"fragment",children:[]})}function h(x,d,z){return this.stack[this.stack.length-1].children.push(x),this.stack.push(x),this.tokenStack.push([d,z]),x.position={start:on(d.start)},x}function p(x){return d;function d(z){x&&x.call(this,z),m.call(this,z)}}function m(x,d){const z=this.stack.pop(),B=this.tokenStack.pop();if(B)B[0].type!==x.type&&(d?d.call(this,x,B[0]):(B[1]||Un).call(this,x,B[0]));else throw new Error("Cannot close `"+x.type+"` ("+dn({start:x.start,end:x.end})+"): itâ€™s not open");return z.position.end=on(x.end),z}function g(){return dt(this.stack.pop())}function c(){u("expectingFirstListItemValue",!0)}function E(x){if(a("expectingFirstListItemValue")){const d=this.stack[this.stack.length-2];d.start=Number.parseInt(this.sliceSerialize(x),10),u("expectingFirstListItemValue")}}function F(){const x=this.resume(),d=this.stack[this.stack.length-1];d.lang=x}function D(){const x=this.resume(),d=this.stack[this.stack.length-1];d.meta=x}function b(){a("flowCodeInside")||(this.buffer(),u("flowCodeInside",!0))}function q(){const x=this.resume(),d=this.stack[this.stack.length-1];d.value=x.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u("flowCodeInside")}function w(){const x=this.resume(),d=this.stack[this.stack.length-1];d.value=x.replace(/(\r?\n|\r)$/g,"")}function P(x){const d=this.resume(),z=this.stack[this.stack.length-1];z.label=d,z.identifier=fn(this.sliceSerialize(x)).toLowerCase()}function M(){const x=this.resume(),d=this.stack[this.stack.length-1];d.title=x}function k(){const x=this.resume(),d=this.stack[this.stack.length-1];d.url=x}function T(x){const d=this.stack[this.stack.length-1];if(!d.depth){const z=this.sliceSerialize(x).length;d.depth=z}}function H(){u("setextHeadingSlurpLineEnding",!0)}function V(x){const d=this.stack[this.stack.length-1];d.depth=this.sliceSerialize(x).charCodeAt(0)===61?1:2}function N(){u("setextHeadingSlurpLineEnding")}function S(x){const d=this.stack[this.stack.length-1];let z=d.children[d.children.length-1];(!z||z.type!=="text")&&(z=ct(),z.position={start:on(x.start)},d.children.push(z)),this.stack.push(z)}function y(x){const d=this.stack.pop();d.value+=this.sliceSerialize(x),d.position.end=on(x.end)}function _(x){const d=this.stack[this.stack.length-1];if(a("atHardBreak")){const z=d.children[d.children.length-1];z.position.end=on(x.end),u("atHardBreak");return}!a("setextHeadingSlurpLineEnding")&&r.canContainEols.includes(d.type)&&(S.call(this,x),y.call(this,x))}function j(){u("atHardBreak",!0)}function C(){const x=this.resume(),d=this.stack[this.stack.length-1];d.value=x}function W(){const x=this.resume(),d=this.stack[this.stack.length-1];d.value=x}function Q(){const x=this.resume(),d=this.stack[this.stack.length-1];d.value=x}function J(){const x=this.stack[this.stack.length-1];if(a("inReference")){const d=a("referenceType")||"shortcut";x.type+="Reference",x.referenceType=d,delete x.url,delete x.title}else delete x.identifier,delete x.label;u("referenceType")}function tn(){const x=this.stack[this.stack.length-1];if(a("inReference")){const d=a("referenceType")||"shortcut";x.type+="Reference",x.referenceType=d,delete x.url,delete x.title}else delete x.identifier,delete x.label;u("referenceType")}function o(x){const d=this.sliceSerialize(x),z=this.stack[this.stack.length-2];z.label=gt(d),z.identifier=fn(d).toLowerCase()}function K(){const x=this.stack[this.stack.length-1],d=this.resume(),z=this.stack[this.stack.length-1];if(u("inReference",!0),z.type==="link"){const B=x.children;z.children=B}else z.alt=d}function en(){const x=this.resume(),d=this.stack[this.stack.length-1];d.url=x}function s(){const x=this.resume(),d=this.stack[this.stack.length-1];d.title=x}function X(){u("inReference")}function cn(){u("referenceType","collapsed")}function U(x){const d=this.resume(),z=this.stack[this.stack.length-1];z.label=d,z.identifier=fn(this.sliceSerialize(x)).toLowerCase(),u("referenceType","full")}function hn(x){u("characterReferenceType",x.type)}function an(x){const d=this.sliceSerialize(x),z=a("characterReferenceType");let B;z?(B=kt(d,z==="characterReferenceMarkerNumeric"?10:16),u("characterReferenceType")):B=Wn(d);const A=this.stack.pop();A.value+=B,A.position.end=on(x.end)}function pn(x){y.call(this,x);const d=this.stack[this.stack.length-1];d.url=this.sliceSerialize(x)}function mn(x){y.call(this,x);const d=this.stack[this.stack.length-1];d.url="mailto:"+this.sliceSerialize(x)}function yn(){return{type:"blockquote",children:[]}}function On(){return{type:"code",lang:null,meta:null,value:""}}function rt(){return{type:"inlineCode",value:""}}function it(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ut(){return{type:"emphasis",children:[]}}function An(){return{type:"heading",depth:void 0,children:[]}}function Ln(){return{type:"break"}}function Pn(){return{type:"html",value:""}}function at(){return{type:"image",title:null,url:"",alt:null}}function _n(){return{type:"link",title:null,url:"",children:[]}}function Mn(x){return{type:"list",ordered:x.type==="listOrdered",start:null,spread:x._spread,children:[]}}function lt(x){return{type:"listItem",spread:x._spread,checked:null,children:[]}}function ot(){return{type:"paragraph",children:[]}}function st(){return{type:"strong",children:[]}}function ct(){return{type:"text",value:""}}function ht(){return{type:"thematicBreak"}}}function on(n){return{line:n.line,column:n.column,offset:n.offset}}function et(n,r){let e=-1;for(;++e<r.length;){const t=r[e];Array.isArray(t)?et(n,t):lr(n,t)}}function lr(n,r){let e;for(e in r)if(tt.call(r,e)){if(e==="canContainEols"){const t=r[e];t&&n[e].push(...t)}else if(e==="transforms"){const t=r[e];t&&n[e].push(...t)}else if(e==="enter"||e==="exit"){const t=r[e];t&&Object.assign(n[e],t)}}}function Un(n,r){throw n?new Error("Cannot close `"+n.type+"` ("+dn({start:n.start,end:n.end})+"): a different token (`"+r.type+"`, "+dn({start:r.start,end:r.end})+") is open"):new Error("Cannot close document, a token (`"+r.type+"`, "+dn({start:r.start,end:r.end})+") is still open")}function mr(n){Object.assign(this,{Parser:e=>{const t=this.data("settings");return ur(e,Object.assign({},t,n,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}export{mr as default};
